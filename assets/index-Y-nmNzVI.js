import{$ as M,r as t,a as R,_ as f,b as N,c as g,d as re,e as x,f as le,g as de,h as I,j as s,i as b,k as ie,u as fe,B as j,I as C,l as ue,H as pe,L as P}from"./index-pBBLcnhQ.js";import{h as be,$ as $e,a as xe,b as me,c as y,d as ge,u as he,i as ve,T as we,S as je,M as Ce,B as Ne,F as De}from"./mode-toggle-gta87VFq.js";const T="Dialog",[A,ft]=M(T),[_e,p]=A(T),ye=e=>{const{__scopeDialog:c,children:o,open:a,defaultOpen:r,onOpenChange:n,modal:l=!0}=e,d=t.useRef(null),i=t.useRef(null),[u=!1,m]=I({prop:a,defaultProp:r,onChange:n});return t.createElement(_e,{scope:c,triggerRef:d,contentRef:i,contentId:y(),titleId:y(),descriptionId:y(),open:u,onOpenChange:m,onOpenToggle:t.useCallback(()=>m($=>!$),[m]),modal:l},o)},Ee="DialogTrigger",Re=t.forwardRef((e,c)=>{const{__scopeDialog:o,...a}=e,r=p(Ee,o),n=N(c,r.triggerRef);return t.createElement(x.button,f({type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":k(r.open)},a,{ref:n,onClick:g(e.onClick,r.onOpenToggle)}))}),F="DialogPortal",[ke,L]=A(F,{forceMount:void 0}),Oe=e=>{const{__scopeDialog:c,forceMount:o,children:a,container:r}=e,n=p(F,c);return t.createElement(ke,{scope:c,forceMount:o},t.Children.map(a,l=>t.createElement(R,{present:o||n.open},t.createElement(de,{asChild:!0,container:r},l))))},E="DialogOverlay",Pe=t.forwardRef((e,c)=>{const o=L(E,e.__scopeDialog),{forceMount:a=o.forceMount,...r}=e,n=p(E,e.__scopeDialog);return n.modal?t.createElement(R,{present:a||n.open},t.createElement(Se,f({},r,{ref:c}))):null}),Se=t.forwardRef((e,c)=>{const{__scopeDialog:o,...a}=e,r=p(E,o);return t.createElement(me,{as:le,allowPinchZoom:!0,shards:[r.contentRef]},t.createElement(x.div,f({"data-state":k(r.open)},a,{ref:c,style:{pointerEvents:"auto",...a.style}})))}),h="DialogContent",Me=t.forwardRef((e,c)=>{const o=L(h,e.__scopeDialog),{forceMount:a=o.forceMount,...r}=e,n=p(h,e.__scopeDialog);return t.createElement(R,{present:a||n.open},n.modal?t.createElement(Ie,f({},r,{ref:c})):t.createElement(Te,f({},r,{ref:c})))}),Ie=t.forwardRef((e,c)=>{const o=p(h,e.__scopeDialog),a=t.useRef(null),r=N(c,o.contentRef,a);return t.useEffect(()=>{const n=a.current;if(n)return be(n)},[]),t.createElement(H,f({},e,{ref:r,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:g(e.onCloseAutoFocus,n=>{var l;n.preventDefault(),(l=o.triggerRef.current)===null||l===void 0||l.focus()}),onPointerDownOutside:g(e.onPointerDownOutside,n=>{const l=n.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0;(l.button===2||d)&&n.preventDefault()}),onFocusOutside:g(e.onFocusOutside,n=>n.preventDefault())}))}),Te=t.forwardRef((e,c)=>{const o=p(h,e.__scopeDialog),a=t.useRef(!1),r=t.useRef(!1);return t.createElement(H,f({},e,{ref:c,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{var l;if((l=e.onCloseAutoFocus)===null||l===void 0||l.call(e,n),!n.defaultPrevented){var d;a.current||(d=o.triggerRef.current)===null||d===void 0||d.focus(),n.preventDefault()}a.current=!1,r.current=!1},onInteractOutside:n=>{var l,d;(l=e.onInteractOutside)===null||l===void 0||l.call(e,n),n.defaultPrevented||(a.current=!0,n.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const i=n.target;((d=o.triggerRef.current)===null||d===void 0?void 0:d.contains(i))&&n.preventDefault(),n.detail.originalEvent.type==="focusin"&&r.current&&n.preventDefault()}}))}),H=t.forwardRef((e,c)=>{const{__scopeDialog:o,trapFocus:a,onOpenAutoFocus:r,onCloseAutoFocus:n,...l}=e,d=p(h,o),i=t.useRef(null),u=N(c,i);return $e(),t.createElement(t.Fragment,null,t.createElement(xe,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:r,onUnmountAutoFocus:n},t.createElement(re,f({role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":k(d.open)},l,{ref:u,onDismiss:()=>d.onOpenChange(!1)}))),!1)}),Ae="DialogTitle",Fe=t.forwardRef((e,c)=>{const{__scopeDialog:o,...a}=e,r=p(Ae,o);return t.createElement(x.h2,f({id:r.titleId},a,{ref:c}))}),Le="DialogDescription",He=t.forwardRef((e,c)=>{const{__scopeDialog:o,...a}=e,r=p(Le,o);return t.createElement(x.p,f({id:r.descriptionId},a,{ref:c}))}),Be="DialogClose",Ue=t.forwardRef((e,c)=>{const{__scopeDialog:o,...a}=e,r=p(Be,o);return t.createElement(x.button,f({type:"button"},a,{ref:c,onClick:g(e.onClick,()=>r.onOpenChange(!1))}))});function k(e){return e?"open":"closed"}const ze=ye,qe=Re,Ge=Oe,B=Pe,U=Me,z=Fe,q=He,Ye=Ue,Ve=ze,Ke=qe,We=Ge,S=Ye,G=t.forwardRef(({className:e,...c},o)=>s.jsx(B,{ref:o,className:b("fixed inset-0 z-50 bg-stone-950/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...c}));G.displayName=B.displayName;const Y=t.forwardRef(({className:e,children:c,...o},a)=>s.jsxs(We,{children:[s.jsx(G,{}),s.jsx(U,{ref:a,className:b("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...o,children:c})]}));Y.displayName=U.displayName;const V=({className:e,...c})=>s.jsx("div",{className:b("flex flex-col space-y-1.5 text-left",e),...c});V.displayName="DialogHeader";const K=({className:e,...c})=>s.jsx("div",{className:b("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...c});K.displayName="DialogFooter";const W=t.forwardRef(({className:e,...c},o)=>s.jsx(z,{ref:o,className:b("flex h-14 items-center text-2xl font-semibold leading-none tracking-tight",e),...c}));W.displayName=z.displayName;const X=t.forwardRef(({className:e,...c},o)=>s.jsx(q,{ref:o,className:b("text-sm text-muted-foreground",e),...c}));X.displayName=q.displayName;const Z=t.forwardRef(({className:e,type:c,...o},a)=>s.jsx("input",{type:c,className:b("flex h-12 w-full overflow-hidden text-ellipsis rounded-md border border-input bg-stone-50 px-3 py-1 text-sm text-primary shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-primary focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...o}));Z.displayName="Input";const Xe=t.forwardRef((e,c)=>t.createElement(x.label,f({},e,{ref:c,onMouseDown:o=>{var a;(a=e.onMouseDown)===null||a===void 0||a.call(e,o),!o.defaultPrevented&&o.detail>1&&o.preventDefault()}}))),J=Xe,Ze=ie("text-sm font-medium leading-none text-secondary-foreground peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Q=t.forwardRef(({className:e,...c},o)=>s.jsx(J,{ref:o,className:b(Ze(),e),...c}));Q.displayName=J.displayName;function Je(e){const c=t.useRef({value:e,previous:e});return t.useMemo(()=>(c.current.value!==e&&(c.current.previous=c.current.value,c.current.value=e),c.current.previous),[e])}const ee="Switch",[Qe,ut]=M(ee),[et,tt]=Qe(ee),ot=t.forwardRef((e,c)=>{const{__scopeSwitch:o,name:a,checked:r,defaultChecked:n,required:l,disabled:d,value:i="on",onCheckedChange:u,...m}=e,[$,D]=t.useState(null),se=N(c,w=>D(w)),_=t.useRef(!1),O=$?!!$.closest("form"):!0,[v=!1,ae]=I({prop:r,defaultProp:n,onChange:u});return t.createElement(et,{scope:o,checked:v,disabled:d},t.createElement(x.button,f({type:"button",role:"switch","aria-checked":v,"aria-required":l,"data-state":te(v),"data-disabled":d?"":void 0,disabled:d,value:i},m,{ref:se,onClick:g(e.onClick,w=>{ae(ne=>!ne),O&&(_.current=w.isPropagationStopped(),_.current||w.stopPropagation())})})),O&&t.createElement(at,{control:$,bubbles:!_.current,name:a,value:i,checked:v,required:l,disabled:d,style:{transform:"translateX(-100%)"}}))}),ct="SwitchThumb",st=t.forwardRef((e,c)=>{const{__scopeSwitch:o,...a}=e,r=tt(ct,o);return t.createElement(x.span,f({"data-state":te(r.checked),"data-disabled":r.disabled?"":void 0},a,{ref:c}))}),at=e=>{const{control:c,checked:o,bubbles:a=!0,...r}=e,n=t.useRef(null),l=Je(o),d=ge(c);return t.useEffect(()=>{const i=n.current,u=window.HTMLInputElement.prototype,$=Object.getOwnPropertyDescriptor(u,"checked").set;if(l!==o&&$){const D=new Event("click",{bubbles:a});$.call(i,o),i.dispatchEvent(D)}},[l,o,a]),t.createElement("input",f({type:"checkbox","aria-hidden":!0,defaultChecked:o},r,{tabIndex:-1,ref:n,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function te(e){return e?"checked":"unchecked"}const oe=ot,nt=st,ce=t.forwardRef(({className:e,...c},o)=>s.jsx(oe,{className:b("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...c,ref:o,children:s.jsx(nt,{className:b("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));ce.displayName=oe.displayName;const rt=()=>{const[e,c]=t.useState(!1),o=window.location.href,[a,r]=t.useState(`${o}`),{toast:n}=fe();t.useEffect(()=>{(u=>{r(`${o}${u?"&hide-controls":""}`)})(e)},[e,o]);const l=()=>{c(i=>!i)},d=()=>{navigator.clipboard.writeText(a),n({description:"Link coppied to clipboard!"})};return s.jsx("div",{className:"w-full",children:s.jsxs(Ve,{children:[s.jsx(Ke,{asChild:!0,className:"w-full",children:s.jsxs(j,{className:"w-full",children:[s.jsx(C,{width:24,icon:"heroicons:share-16-solid"}),"Share"]})}),s.jsxs(Y,{children:[s.jsxs(V,{children:[s.jsx(W,{children:"Share"}),s.jsx(X,{children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(Z,{value:a,readOnly:!0}),s.jsxs("div",{className:"flex h-12 items-center justify-between space-x-2",children:[s.jsx(Q,{htmlFor:"hide-controls",children:"Hide controls"}),s.jsx(ce,{id:"hide-controls",onCheckedChange:l,checked:e})]})]})})]}),s.jsx(K,{children:s.jsxs("div",{className:"flex w-full flex-row items-center justify-end gap-2",children:[s.jsx("div",{className:"w-full",children:s.jsx(S,{className:"w-full",children:s.jsxs(j,{variant:"secondary",className:"w-full",children:[s.jsx(C,{width:24,icon:"heroicons:x-mark-16-solid"}),"Close"]})})}),s.jsx("div",{className:"w-full",children:s.jsx(S,{className:"w-full",children:s.jsxs(j,{className:"w-full",onClick:d,children:[s.jsx(C,{width:24,icon:"heroicons:clipboard-16-solid"}),"Copy"]})})})]})})]})]})})},lt=function(){const{card:c,setCard:o}=he(),[a]=ue(),r=a.get("hide-controls")!==null;return t.useEffect(()=>{if(c.length===0){const n=[];for(let l=1;l<26;l+=1){const d=a.get(`b${l}`);if(d){const i=ve.find(u=>u.tag===d);i&&n.push({id:i.id,tag:i.tag,name:i.name})}}n.length===25&&o(n)}},[a,c,o]),s.jsxs("div",{className:"relative flex min-h-screen flex-col",children:[s.jsx(pe,{children:s.jsx("title",{children:"Your Card • Skattjakt"})}),s.jsxs(we,{children:[s.jsx("div",{children:s.jsx(P,{to:"/generate",className:"w-full",children:s.jsx("div",{className:"w-full rounded-md p-2 hover:bg-secondary",children:s.jsx(je,{})})})}),s.jsx("div",{className:"flex w-full items-center justify-center",children:s.jsx("h1",{className:"w-full px-2 text-center text-2xl font-bold",children:"Skattjakt"})}),s.jsx("div",{children:s.jsx(Ce,{})})]}),s.jsx("div",{className:"z-0 flex h-full w-full flex-1 flex-col items-center justify-center px-4",children:s.jsxs("div",{className:"flex w-full max-w-xl flex-col items-center justify-center gap-6",children:[s.jsx("div",{className:"flex h-12 w-full flex-row items-center",children:s.jsx("div",{className:"flex w-full flex-row items-center justify-center",children:s.jsx("h1",{className:"text-2xl",children:"Your card"})})}),s.jsx(Ne,{}),!r&&s.jsxs("div",{className:"flex h-12 w-full flex-row items-center justify-end gap-2",children:[s.jsx("div",{className:"w-full",children:s.jsx(P,{to:"/generate",className:"w-full",children:s.jsxs(j,{className:"w-full",variant:"secondary",children:[s.jsx(C,{icon:"heroicons:arrow-left-16-solid",className:"text-2xl"}),"Return"]})})}),s.jsx(rt,{})]})]})}),s.jsx(De,{})]})},pt=lt;export{pt as default};
